
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 11 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  client/src/game/resourceLimits.test.ts > Resource Limits - Core Functionality > getResourceLimit > should return 5000 for Storehouse (level 2)
AssertionError: expected 2500 to be 5000 // Object.is equality

- Expected
+ Received

- 5000
+ 2500

 ❯ client/src/game/resourceLimits.test.ts:36:39
     34|     it('should return 5000 for Storehouse (level 2)', () => {
     35|       state.buildings.storehouse = 1;
     36|       expect(getResourceLimit(state)).toBe(5000);
       |                                       ^
     37|     });
     38| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/11]⎯

 FAIL  client/src/game/resourceLimits.test.ts > Resource Limits - Core Functionality > getResourceLimit > should return 10000 for Fortified Storehouse (level 3)
AssertionError: expected 5000 to be 10000 // Object.is equality

- Expected
+ Received

- 10000
+ 5000

 ❯ client/src/game/resourceLimits.test.ts:41:39
     39|     it('should return 10000 for Fortified Storehouse (level 3)', () => {
     40|       state.buildings.fortifiedStorehouse = 1;
     41|       expect(getResourceLimit(state)).toBe(10000);
       |                                       ^
     42|     });
     43| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/11]⎯

 FAIL  client/src/game/resourceLimits.test.ts > Resource Limits - Core Functionality > getResourceLimit > should return 25000 for Village Warehouse (level 4)
AssertionError: expected 10000 to be 25000 // Object.is equality

- Expected
+ Received

- 25000
+ 10000

 ❯ client/src/game/resourceLimits.test.ts:46:39
     44|     it('should return 25000 for Village Warehouse (level 4)', () => {
     45|       state.buildings.villageWarehouse = 1;
     46|       expect(getResourceLimit(state)).toBe(25000);
       |                                       ^
     47|     });
     48| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/11]⎯

 FAIL  client/src/game/resourceLimits.test.ts > Resource Limits - Core Functionality > getResourceLimit > should return 50000 for Grand Repository (level 5)
AssertionError: expected 25000 to be 50000 // Object.is equality

- Expected
+ Received

- 50000
+ 25000

 ❯ client/src/game/resourceLimits.test.ts:51:39
     49|     it('should return 50000 for Grand Repository (level 5)', () => {
     50|       state.buildings.grandRepository = 1;
     51|       expect(getResourceLimit(state)).toBe(50000);
       |                                       ^
     52|     });
     53| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/11]⎯

 FAIL  client/src/game/resourceLimits.test.ts > Resource Limits - Core Functionality > getResourceLimit > should return 100000 for Great Vault (level 6)
AssertionError: expected 50000 to be 100000 // Object.is equality

- Expected
+ Received

- 100000
+ 50000

 ❯ client/src/game/resourceLimits.test.ts:56:39
     54|     it('should return 100000 for Great Vault (level 6)', () => {
     55|       state.buildings.greatVault = 1;
     56|       expect(getResourceLimit(state)).toBe(100000);
       |                                       ^
     57|     });
     58| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/11]⎯

 FAIL  client/src/game/resourceLimits.test.ts > Resource Limits - Core Functionality > getStorageLimitText > should return formatted number for storage level 3
AssertionError: expected '5,000' to be '10,000' // Object.is equality

Expected: "10,000"
Received: "5,000"

 ❯ client/src/game/resourceLimits.test.ts:146:42
    144|     it('should return formatted number for storage level 3', () => {
    145|       state.buildings.fortifiedStorehouse = 1;
    146|       expect(getStorageLimitText(state)).toBe('10,000');
       |                                          ^
    147|     });
    148| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/11]⎯

 FAIL  client/src/game/resourceLimits.test.ts > Resource Limits - Integration with Game Components > Storage Building Upgrades > should increase limit when upgrading storage
AssertionError: expected 2500 to be 5000 // Object.is equality

- Expected
+ Received

- 5000
+ 2500

 ❯ client/src/game/resourceLimits.test.ts:399:39
    397| 
    398|       state.buildings.storehouse = 1; // 5000 limit (overrides supplyHut)
    399|       expect(getResourceLimit(state)).toBe(5000);
       |                                       ^
    400| 
    401|       // Resources above old limit but below new limit should be allowed

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/11]⎯

 FAIL  client/src/game/resourceLimits.test.ts > Resource Limits - Integration with Game Components > Storage Building Upgrades > should cap at new limit after upgrade
AssertionError: expected 5000 to be 10000 // Object.is equality

- Expected
+ Received

- 10000
+ 5000

 ❯ client/src/game/resourceLimits.test.ts:411:40
    409|       state.resources.stone = 9500;
    410|       const updates = updateResource(state, 'stone', 1000);
    411|       expect(updates.resources?.stone).toBe(10000);
       |                                        ^
    412|     });
    413| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/11]⎯

 FAIL  client/src/game/resourceLimits.test.ts > Resource Limits - Integration with Game Components > Edge Cases and Boundary Conditions > should handle very large production amounts
AssertionError: expected 50000 to be 100000 // Object.is equality

- Expected
+ Received

- 100000
+ 50000

 ❯ client/src/game/resourceLimits.test.ts:472:39
    470|       state.buildings.greatVault = 1;
    471|       const updates = updateResource(state, 'wood', 150000);
    472|       expect(updates.resources?.wood).toBe(100000);
       |                                       ^
    473|     });
    474|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/11]⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Building Cost Reductions > should apply fortified storehouse building discount for buildCabin if available
TypeError: gameActions.buildCabin.cost is not a function
 ❯ client/src/game/rules/actionEffects.test.ts:230:45
    228|     });
    229|     const updatesWith = executeActionEffects('buildCabin', state);
    230|     const baseCost = gameActions.buildCabin.cost!(state);
       |                                             ^
    231|     const baseWoodCost = parseInt(baseCost.wood!.split(' ')[0]);
    232|     const baseStoneCost = parseInt(baseCost.stone!.split(' ')[0]);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/11]⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Cost Reduction Edge Cases > should floor discount calculations correctly for building if discount exists
TypeError: gameActions.buildCabin.cost is not a function
 ❯ client/src/game/rules/actionEffects.test.ts:422:45
    420|     });
    421|     const updates = executeActionEffects('buildCabin', state);
    422|     const baseCost = gameActions.buildCabin.cost!(state);
       |                                             ^
    423|     const baseWoodCost = parseInt(baseCost.wood!.split(' ')[0]);
    424|     const baseStoneCost = parseInt(baseCost.stone!.split(' ')[0]);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/11]⎯


 Test Files  3 failed (3)
      Tests  12 failed | 76 passed (88)
   Start at  09:23:02
   Duration  717ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
