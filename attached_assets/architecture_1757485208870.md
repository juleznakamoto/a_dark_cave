# Architekturübersicht: A Dark Cave

## Ziel
Ein textbasiertes Aufbauspiel im Browser, inspiriert von *A Dark Room* (https://adarkroom.doublespeakgames.com/).  
Die Spieler beginnen minimal (Feuer entzünden) und schalten nach und nach Ressourcen, Gebäude, Dorfbewohner und eine Weltkarte frei.

---

## Technologie-Stack
- **Frontend:** React + Vite + TypeScript
- **State Management:** Zustand
- **Styling:** TailwindCSS
- **Persistenz:** IndexedDB via `idb`
- **Game Loop:** `requestAnimationFrame`-basierte Tick-Logik (~200 ms)
- **Deployment:** Replit (Static Site Deployment)

---

## Modulübersicht
/src
/components → UI-Komponenten
/game
loop.ts → Tick-Loop (Zeitfortschritt)
state.ts → Zustand (Ressourcen, Gebäude, Flags, Arbeiter)
save.ts → Speichern/Laden in IndexedDB
rules.ts → Datengetriebene Definition von Aktionen, Upgrades
App.tsx → Root-Komponente
main.tsx → Einstiegspunkt für React
/public → statische Assets

---

## Game State (Zustandsschema)
```ts
{
  resources: { wood: number, food: number, ... },
  flags: { fireLit: boolean, villageUnlocked: boolean },
  Tools: {axe: boolean, spear: boolean},
  buildings: { hut: number, traps: number },
  villagers: { free: number, hunters: number },
  world: { discovered: boolean, position: {x: number, y: number} },
  story: { seen: Record<string, boolean> },
  version: number
}