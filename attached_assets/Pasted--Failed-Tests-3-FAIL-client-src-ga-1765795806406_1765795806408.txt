⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 3 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Crafting Cost Reductions > should apply blacksmith_hammer 15% crafting discount
AssertionError: expected 15 to be 23 // Object.is equality

- Expected
+ Received

- 23
+ 15

 ❯ client/src/game/rules/actionEffects.test.ts:105:41
    103|     const updatesWith = applyActionEffects('craftIronSword', state);
    104|     const expectedCost = Math.floor(150 * 0.85); // 127
    105|     expect(updatesWith.resources!.iron).toBe(150 - expectedCost); // 150 -…
       |                                         ^
    106|   });
    107| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Crafting Cost Reductions > should stack crafting discounts from buildings and tools
AssertionError: expected 23 to be 30 // Object.is equality

- Expected
+ Received

- 30
+ 23

 ❯ client/src/game/rules/actionEffects.test.ts:150:37
    148|     // Total discount: 15% + 5% = 20%
    149|     const expectedCost = Math.floor(150 * 0.8); // 120
    150|     expect(updates.resources!.iron).toBe(150 - expectedCost); // 150 - 120…
       |                                     ^
    151|   });
    152| });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/3]⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Cost Reduction Edge Cases > should handle crafting with maximum discounts
AssertionError: expected 68 to be 75 // Object.is equality

- Expected
+ Received

- 75
+ 68

 ❯ client/src/game/rules/actionEffects.test.ts:277:37
    275|     // Total discount: 15% + 5% + 5% + 5% + 10% + 10% = 50%
    276|     const expectedCost = Math.floor(150 * 0.5); // 75
    277|     expect(updates.resources!.iron).toBe(150 - expectedCost); // 150 - 75 …
       |                                     ^
    278|   });
    279| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/3]⎯


 Test Files  1 failed (1)
      Tests  3 failed | 16 passed (19)
   Start at  10:49:44
   Duration  577ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
