 RERUN  rerun all tests 

stdout | client/src/game/rules/actionEffects.test.ts
vdev Registering sounds for lazy loading...
vdev Sound URLs registered for lazy loading

stdout | client/src/game/rules/resourceGains.test.ts
vdev Registering sounds for lazy loading...
vdev Sound URLs registered for lazy loading

 ‚ùØ client/src/game/rules/actionEffects.test.ts (6 tests | 1 failed) 16ms
     ‚úì should successfully import and use applyActionEffects 2ms
     ‚úì should apply effects for craftBoneTotem action 3ms
     ‚úì should apply effects for craftTorch action 1ms
     ‚úì should apply effects for craftIronSword action 1ms
     ‚úì should handle action that does not exist 1ms
     √ó should throw error if gameActions not registered 3ms
 ‚ùØ client/src/game/rules/resourceGains.test.ts (49 tests | 47 failed) 50ms
       √ó chopWood gains match tooltip 12ms
       √ó exploreCave gains match tooltip 1ms
       √ó ventureDeeper gains match tooltip 1ms
       √ó mineStone gains match tooltip 1ms
       √ó mineIron gains match tooltip 1ms
       √ó mineCoal gains match tooltip 1ms
       √ó mineObsidian gains match tooltip 1ms
       √ó hunt gains match tooltip 1ms
       √ó chopWood with loggers_gloves applies correct bonus 1ms
       √ó hunt with hunter_cloak applies correct bonus 1ms
       √ó mineStone with different pickaxes shows progression 1ms
       √ó exploreCave with different lanterns shows progression 1ms
       ‚úì mastermason_chisel reduces building costs by 10% 2ms
       ‚úì blacksmith_hammer reduces crafting costs by 15% 5ms
       √ó boneTotems gains match tooltip 1ms
       √ó leatherTotems gains match tooltip 1ms
       √ó boneTotems with boneTemple applies 25% bonus 0ms
       √ó boneTotems with sacrificial_tunic applies 25% bonus 1ms
       √ó leatherTotems with sacrificial_tunic applies 25% bonus 0ms
       √ó boneTotems with both boneTemple and sacrificial_tunic stacks additively (50% total) 1ms
       √ó leatherTotems with both boneTemple and sacrificial_tunic stacks additively (50% total) 0ms
       √ó boneTotems with sacrificial_tunic: tooltip matches actual gains 0ms
       √ó leatherTotems with sacrificial_tunic: tooltip matches actual gains 1ms
       √ó boneTotems with sacrificial_tunic and boneTemple: tooltip matches actual gains 1ms
       √ó leatherTotems with sacrificial_tunic and boneTemple: tooltip matches actual gains 1ms
       √ó boneTotems: only tunic (no temple) gives 25% bonus 0ms
       √ó boneTotems: only temple (no tunic) gives 25% bonus 0ms
       √ó leatherTotems: only tunic (no temple) gives 25% bonus 1ms
       √ó leatherTotems: only temple (no tunic) gives 25% bonus 1ms
       √ó chopWood with button upgrades increases gains 1ms
       √ó exploreCave with button upgrades increases gains 1ms
       √ó chopWood with stone axe shows baseline gains 1ms
       √ó chopWood with iron axe shows improved gains 0ms
       √ó chopWood with steel axe shows further improved gains 0ms
       √ó multiple bonuses stack correctly for chopWood 1ms
       √ó multiple bonuses stack correctly for mining 1ms
       √ó exploreCitadel gains match tooltip 1ms
       √ó exploreCitadel: tooltip calculation matches actual gains 1ms
       √ó exploreCitadel with cave exploration bonuses 1ms
       √ó craftBoneTotem produces correct amount 0ms
       √ó craftBoneTotems5 produces correct amount 0ms
       √ó craftLeatherTotem produces correct amount 0ms
       √ó craftLeatherTotems5 produces correct amount 0ms
       √ó mineSulfur gains match tooltip 1ms
       √ó mineAdamant gains match tooltip 1ms
       √ó tradeGoldForFood (tier 3) produces correct amount 0ms
       √ó tradeGoldForStone (tier 3) produces correct amount 0ms
       √ó tradeGoldForTorch (tier 3) produces correct amount 0ms
       √ó tradeSilverForGold (tier 3) produces correct amount 0ms
 ‚úì client/src/game/save.comprehensive.test.ts (59 tests) 214ms
stdout | client/src/game/save.test.ts > Game Save/Load > should preserve cooldowns after save/load cycle
vdev Registering sounds for lazy loading...
vdev Sound URLs registered for lazy loading

stdout | client/src/game/save.test.ts > Game Save/Load > should preserve cooldowns after save/load cycle
vdev [LOAD] üíæ Local save retrieved: {
  hasLocalSave: true,
  timestamp: '2025-12-09T12:19:26.223Z',
  playTime: 1000,
  playTimeMinutes: 0,
  hasCooldowns: true,
  cooldowns: { gatherWood: 5, buildHut: 10 },
  hasCooldownDurations: true,
  cooldownDurations: { gatherWood: 5, buildHut: 10 },
  cooldownDetails: [
    { action: 'gatherWood', remaining: 5, duration: 5 },
    { action: 'buildHut', remaining: 10, duration: 10 }
  ]
}

stdout | client/src/game/save.test.ts > Game Save/Load > should preserve cooldowns after save/load cycle
vdev [REFERRAL] üîç Processing unclaimed referrals... {
  hasUser: false,
  hasReferrals: false,
  referralsCount: 0,
  referrals: undefined
}
vdev [REFERRAL] ‚è≠Ô∏è Skipping - no user or no referrals

stdout | client/src/game/save.test.ts > Game Save/Load > should preserve cooldowns after save/load cycle
vdev [LOAD] Returning local state (no auth): {
  hasCooldownDurations: true,
  cooldownDurations: { gatherWood: 5, buildHut: 10 }
}

stdout | client/src/game/save.test.ts > Game Save/Load > should handle corrupted save data gracefully
vdev [LOAD] üíæ Local save retrieved: {
  hasLocalSave: true,
  timestamp: '2025-12-09T12:19:26.330Z',
  playTime: undefined,
  playTimeMinutes: 0,
  hasCooldowns: false,
  cooldowns: undefined,
  hasCooldownDurations: false,
  cooldownDurations: undefined,
  cooldownDetails: []
}

stdout | client/src/game/save.test.ts > Game Save/Load > should handle corrupted save data gracefully
vdev [REFERRAL] üîç Processing unclaimed referrals... {
  hasUser: false,
  hasReferrals: false,
  referralsCount: 0,
  referrals: undefined
}
vdev [REFERRAL] ‚è≠Ô∏è Skipping - no user or no referrals

stdout | client/src/game/save.test.ts > Game Save/Load > should handle corrupted save data gracefully
vdev [LOAD] Returning local state (no auth): { hasCooldownDurations: true, cooldownDurations: {} }

stdout | client/src/game/save.test.ts > Game Save/Load > should merge cloud save with local save correctly
vdev [LOAD] üíæ Local save retrieved: {
  hasLocalSave: true,
  timestamp: 'none',
  playTime: 1000,
  playTimeMinutes: 0,
  hasCooldowns: false,
  cooldowns: undefined,
  hasCooldownDurations: false,
  cooldownDurations: undefined,
  cooldownDetails: []
}

stdout | client/src/game/save.test.ts > Game Save/Load > should merge cloud save with local save correctly
vdev [LOAD] ‚òÅÔ∏è Using cloud save (user authenticated)

stdout | client/src/game/save.test.ts > Game Save/Load > should merge cloud save with local save correctly
vdev [REFERRAL] üîç Processing unclaimed referrals... {
  hasUser: true,
  hasReferrals: false,
  referralsCount: 0,
  referrals: undefined
}
vdev [REFERRAL] ‚è≠Ô∏è Skipping - no user or no referrals

stdout | client/src/game/save.test.ts > Game Save/Load > should merge cloud save with local save correctly
vdev [LOAD] ‚úÖ Cloud save loaded and synced locally

 ‚úì client/src/game/save.test.ts (3 tests) 115ms
 ‚úì server/referral.integration.test.ts (4 tests) 533ms
     ‚úì should return JSON content-type  480ms
stdout | server/stripe.test.ts > Stripe Shop Integration > verifyPayment > should verify successful payment
‚úÖ Purchase saved: { id: 'purchase123', item_id: 'gold_250', user_id: 'user123' }

stderr | server/stripe.test.ts > Stripe Shop Integration > verifyPayment > should reject payment with incorrect amount
Payment amount mismatch for item gold_250. Expected: 99, Got: 1

 ‚úì server/stripe.test.ts (9 tests) 12ms
stdout | client/src/game/loop.test.ts
vdev Registering sounds for lazy loading...
vdev Sound URLs registered for lazy loading

stdout | client/src/game/loop.test.ts > Game Loop Production > should handle starvation when food runs out
vdev [STATE] Set Flag: starvationActive = true

 ‚úì client/src/game/loop.test.ts (3 tests) 7ms
 ‚úì server/auth.test.ts (2 tests) 17ms
 ‚úì shared/shopItems.test.ts (39 tests) 37ms
 ‚úì client/src/game/population.test.ts (14 tests) 16ms
 ‚úì client/src/game/state.merge.test.ts (9 tests) 7ms
 ‚úì server/referral.test.ts (6 tests) 8ms
 ‚úì server/referral.e2e.test.ts (2 tests) 8ms
stdout | client/src/game/rules/events.test.ts
vdev Registering sounds for lazy loading...
vdev Sound URLs registered for lazy loading

 ‚úì client/src/game/rules/events.test.ts (3 tests) 6ms

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 48 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  client/src/game/rules/actionEffects.test.ts > actionEffects - circular dependency fix > should throw error if gameActions not registered
Error: Cannot find module './actionEffects'
Require stack:
- /home/runner/workspace/client/src/game/rules/actionEffects.test.ts
 ‚ùØ client/src/game/rules/actionEffects.test.ts:71:61
     69|   it('should throw error if gameActions not registered', () => {
     70|     // Create a fresh import scenario by testing without registration
     71|     const { applyActionEffects: freshApplyActionEffects } = require('./actionEffects');
       |                                                             ^
     72|     
     73|     // This would normally throw, but since we already registered in beforeEach,

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Cave Exploration Actions > chopWood gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:303:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Cave Exploration Actions > exploreCave gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:319:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Cave Exploration Actions > ventureDeeper gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:337:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineStone gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:357:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineIron gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:373:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineCoal gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:389:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineObsidian gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:405:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[8/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Hunting Actions > hunt gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:423:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[9/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > chopWood with loggers_gloves applies correct bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:445:50

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[10/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > hunt with hunter_cloak applies correct bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:462:50

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[11/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > mineStone with different pickaxes shows progression
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:479:45

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[12/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > exploreCave with different lanterns shows progression
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:497:44

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[13/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:572:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[14/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:588:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[15/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems with boneTemple applies 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:608:50

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[16/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems with sacrificial_tunic applies 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:625:50

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[17/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems with sacrificial_tunic applies 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:644:50

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[18/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems with both boneTemple and sacrificial_tunic stacks additively (50% total)
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:663:50

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[19/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems with both boneTemple and sacrificial_tunic stacks additively (50% total)
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:682:50

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[20/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems with sacrificial_tunic: tooltip matches actual gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:704:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[21/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems with sacrificial_tunic: tooltip matches actual gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:729:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[22/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems with sacrificial_tunic and boneTemple: tooltip matches actual gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:754:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[23/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems with sacrificial_tunic and boneTemple: tooltip matches actual gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:787:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[24/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems: only tunic (no temple) gives 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:817:47

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[25/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems: only temple (no tunic) gives 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:833:47

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[26/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems: only tunic (no temple) gives 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:850:47

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[27/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems: only temple (no tunic) gives 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:866:47

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[28/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Button Upgrades > chopWood with button upgrades increases gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:887:50

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[29/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Button Upgrades > exploreCave with button upgrades increases gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:908:50

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[30/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Axe Progression > chopWood with stone axe shows baseline gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:922:33

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[31/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Axe Progression > chopWood with iron axe shows improved gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:933:33

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[32/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Axe Progression > chopWood with steel axe shows further improved gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:944:33

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[33/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Multiplier Stacking > multiple bonuses stack correctly for chopWood
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:961:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[34/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Multiplier Stacking > multiple bonuses stack correctly for mining
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:981:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[35/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Additional Cave Exploration > exploreCitadel gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1001:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[36/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Additional Cave Exploration > exploreCitadel: tooltip calculation matches actual gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1026:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[37/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Additional Cave Exploration > exploreCitadel with cave exploration bonuses
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1053:47

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[38/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Craft Actions > craftBoneTotem produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1068:29
    1066|         buildings: { altar: 1 },
    1067|       });
    1068|       const effectUpdates = applyActionEffects('craftBoneTotem', state);
       |                             ^
    1069| 
    1070|       expect(effectUpdates.resources?.bone_totem).toBe((state.resources.bone_totem || ‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Craft Actions > craftBoneTotems5 produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1077:29
    1075|         buildings: { sanctum: 1 },
    1076|       });
    1077|       const effectUpdates = applyActionEffects('craftBoneTotems5', state);
       |                             ^
    1078| 
    1079|       expect(effectUpdates.resources?.bone_totem).toBe((state.resources.bone_totem || ‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[40/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Craft Actions > craftLeatherTotem produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1086:29
    1084|         buildings: { temple: 1 },
    1085|       });
    1086|       const effectUpdates = applyActionEffects('craftLeatherTotem', state);
       |                             ^
    1087| 
    1088|       expect(effectUpdates.resources?.leather_totem).toBe((state.resources.leather_tot‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[41/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Craft Actions > craftLeatherTotems5 produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1095:29
    1093|         buildings: { sanctum: 1 },
    1094|       });
    1095|       const effectUpdates = applyActionEffects('craftLeatherTotems5', state);
       |                             ^
    1096| 
    1097|       expect(effectUpdates.resources?.leather_totem).toBe((state.resources.leather_tot‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[42/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Advanced Mining Actions > mineSulfur gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1107:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[43/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Advanced Mining Actions > mineAdamant gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1123:46

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[44/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Trade Actions > tradeGoldForFood (tier 3) produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1141:29
    1139|         buildings: { merchantsGuild: 1 },
    1140|       });
    1141|       const effectUpdates = applyActionEffects('tradeGoldForFood', state);
       |                             ^
    1142| 
    1143|       // Tier 3 gives 1000 food

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[45/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Trade Actions > tradeGoldForStone (tier 3) produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1153:29
    1151|         buildings: { merchantsGuild: 1 },
    1152|       });
    1153|       const effectUpdates = applyActionEffects('tradeGoldForStone', state);
       |                             ^
    1154| 
    1155|       // Tier 3 gives 1000 stone

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[46/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Trade Actions > tradeGoldForTorch (tier 3) produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1165:29
    1163|         buildings: { merchantsGuild: 1 },
    1164|       });
    1165|       const effectUpdates = applyActionEffects('tradeGoldForTorch', state);
       |                             ^
    1166| 
    1167|       // Tier 3 gives 250 torches

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[47/48]‚éØ

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Trade Actions > tradeSilverForGold (tier 3) produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ‚ùØ client/src/game/rules/resourceGains.test.ts:1177:29
    1175|         buildings: { merchantsGuild: 1 },
    1176|       });
    1177|       const effectUpdates = applyActionEffects('tradeSilverForGold', state);
       |                             ^
    1178| 
    1179|       // Tier 3 gives 50 gold

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[48/48]‚éØ


 Test Files  2 failed | 12 passed (14)
      Tests  48 failed | 160 passed (208)
   Start at  12:19:25
   Duration  2.37s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit