stdout | client/src/game/loop.test.ts > Game Loop Production > should handle starvation when food runs out
vdev [STATE] Set Flag: starvationActive = true

 ✓ client/src/game/loop.test.ts (3 tests) 6ms
 ✓ server/referral.e2e.test.ts (2 tests) 7ms

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 3 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Additional Cave Exploration > exploreCitadel gains match tooltip
AssertionError: expected 1 to be greater than or equal to 2
 ❯ client/src/game/rules/resourceGains.test.ts:1010:29
    1008| 
    1009|           // Verify actual gains fall within expected range
    1010|           expect(minActual).toBeGreaterThanOrEqual(expectedGains[resource].min);
       |                             ^
    1011|           expect(maxActual).toBeLessThanOrEqual(expectedGains[resource].max);
    1012|         }
 ❯ client/src/game/rules/resourceGains.test.ts:1003:62

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Additional Cave Exploration > exploreCitadel: tooltip calculation matches actual gains
AssertionError: expected 1 to be greater than or equal to 2
 ❯ client/src/game/rules/resourceGains.test.ts:1039:29
    1037|           const minActual = Math.min(...actualGains[resource]);
    1038|           const maxActual = Math.max(...actualGains[resource]);
    1039|           expect(minActual).toBeGreaterThanOrEqual(tooltipGain.min);
       |                             ^
    1040|           expect(maxActual).toBeLessThanOrEqual(tooltipGain.max);
    1041|         }
 ❯ client/src/game/rules/resourceGains.test.ts:1029:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/3]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Additional Cave Exploration > exploreCitadel with cave exploration bonuses
AssertionError: expected 2 to be greater than 2
 ❯ client/src/game/rules/resourceGains.test.ts:1057:38
    1055| 
    1056|       // Iron lantern provides 25% cave explore multiplier
    1057|       expect(gainsWith.obsidian.min).toBeGreaterThan(gainsWithout.obsidian.min);
       |                                      ^
    1058|       expect(gainsWith.obsidian.max).toBeGreaterThan(gainsWithout.obsidian.max);
    1059|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/3]⎯


 Test Files  1 failed | 12 passed (13)
      Tests  3 failed | 199 passed (202)
   Start at  19:02:21
   Duration  3.35s (transform 1.44s, setup 0ms, import 2.52s, tests 1.49s, environment 2ms)

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
