
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 3 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  client/src/game/state.resourceLimits.test.ts > State - Resource Limits Integration > Storage upgrade scenarios > should allow accumulation above old limit after storage upgrade
AssertionError: expected 1000 to be 3000 // Object.is equality

- Expected
+ Received

- 3000
+ 1000

 ❯ client/src/game/state.resourceLimits.test.ts:202:54
    200|       // Now can add more
    201|       store.updateResource('wood', 2000);
    202|       expect(useGameStore.getState().resources.wood).toBe(3000);
       |                                                      ^
    203| 
    204|       // But still capped at new limit

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯

 FAIL  client/src/game/state.resourceLimits.test.ts > State - Resource Limits Integration > Storage upgrade scenarios > should handle all storage tiers correctly
AssertionError: expected 1000 to be 500 // Object.is equality

- Expected
+ Received

- 500
+ 1000

 ❯ client/src/game/state.resourceLimits.test.ts:238:56
    236| 
    237|         // Should be capped exactly at limit
    238|         expect(useGameStore.getState().resources.iron).toBe(limit);
       |                                                        ^
    239|       });
    240|     });
 ❯ client/src/game/state.resourceLimits.test.ts:221:13

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/3]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Building Cost Reductions > storage buildings reduce building costs correctly
AssertionError: expected 150 to be 142 // Object.is equality

- Expected
+ Received

- 142
+ 150

 ❯ client/src/game/rules/resourceGains.test.ts:559:36
    557|       // Storehouse: 5% crafting cost reduction (applies to building costs…
    558|       const amountWithStorehouse = parseInt(woodCostWithStorehouse!.text.s…
    559|       expect(amountWithStorehouse).toBe(Math.floor(amountWithout * 0.95));
       |                                    ^
    560|     });
    561|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/3]⎯


 Test Files  3 failed | 1 passed (4)
      Tests  4 failed | 135 passed (139)
   Start at  09:28:48
   Duration  5.62s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
