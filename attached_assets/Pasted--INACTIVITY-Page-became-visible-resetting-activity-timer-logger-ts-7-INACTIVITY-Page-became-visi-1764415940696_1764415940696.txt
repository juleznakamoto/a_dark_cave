[INACTIVITY] Page became visible, resetting activity timer
logger.ts:7 [INACTIVITY] Page became visible, resetting activity timer
logger.ts:7 [INACTIVITY] Page became visible, resetting activity timer
logger.ts:7 [LOOP] ğŸ”„ Loop running: {isPaused: false, isDialogOpen: false, manuallyPaused: false, eventDialogOpen: false, combatDialogOpen: false,Â â€¦}
logger.ts:7 [LOOP] ğŸ”„ Tick processing: {ticksProcessed: 571, tickAccumulator: 134, deltaTime: 142709, currentCooldowns: Array(93)}
logger.ts:7 [GAME LOOP] Normal production running - idle mode is NOT active
logger.ts:7 [LOOP] â¸ï¸ Pausing game loop (dialog open or manually paused)
logger.ts:7 [LOOP] ğŸ”„ Loop running: {isPaused: true, isDialogOpen: true, manuallyPaused: false, eventDialogOpen: true, combatDialogOpen: false,Â â€¦}
logger.ts:7 [LOOP] ğŸ›‘ Stopping game loop
logger.ts:7 [LOOP] Current state: {gameLoopId: 66898, isInactive: false, isGameLoopActive: true}
logger.ts:7 [LOOP] Canceling animation frame: 66898
logger.ts:7 [LOOP] âœ… Game loop stopped successfully
logger.ts:7 [LOOP] Inactivity checker cleared
logger.ts:7 [LOOP] Session checker cleared
logger.ts:7 Loading sound: backgroundMusic from /sounds/background_music.wav
logger.ts:7 [SAVE CLOUD] ğŸ” Starting cloud save with OCC... {playTime: 821441.0999999982, isNewGame: false, userId: 'a375ecb5...', diffKeys: Array(8), hasPlayTime: true,Â â€¦}
logger.ts:7 [SAVE CLOUD] ğŸ’¾ Calling database RPC with OCC validation... {hasClickAnalytics: false, clickAnalyticsKeys: Array(0), diffSize: 5546, playTime: 821441.0999999982, isNewGame: false,Â â€¦}
logger.ts:7 [SAVE CLOUD] âœ… Cloud save completed successfully - OCC check passed in database
logger.ts:7 [SAVE] âœ… Updated lastCloudState after successful cloud save
logger.ts:7 [LOAD] ğŸ’¾ Local save retrieved: {hasLocalSave: true, timestamp: '2025-11-29T11:31:15.760Z', playTime: 821441.0999999982, playTimeMinutes: 14, hasCooldowns: true,Â â€¦}
logger.ts:7 Successfully loaded sound: backgroundMusic
logger.ts:7 [LOAD CLOUD] ğŸ“Š Loaded from Supabase: {hasData: true, hasReferrals: true, referralsCount: 6, referrals: Array(6), playTime: 821441.0999999982,Â â€¦}
logger.ts:7 [LOAD] â˜ï¸ Using cloud save (user authenticated)
logger.ts:7 [REFERRAL] ğŸ” Processing unclaimed referrals... {hasUser: true, hasReferrals: true, referralsCount: 6, referrals: Array(6)}
logger.ts:7 [REFERRAL] â„¹ï¸ No unclaimed referrals to process
logger.ts:7 [LOAD] âœ… Cloud save loaded and synced locally
logger.ts:7 [GAME] Game loaded from save
logger.ts:7 [GAME] Detected claimed referrals - saving to cloud
logger.ts:7 [LOOP] ğŸš€ Starting game loop
logger.ts:7 [LOOP] ğŸ• Game start time initialized: 924774.8000000119
logger.ts:7 [INACTIVITY] Initialized activity tracking at 2025-11-29T11:31:17.756Z
logger.ts:7 [LOOP] ğŸ¬ First animation frame requested, loop ID: null
logger.ts:7 [LOOP] âœ… Game loop initialized successfully
logger.ts:7 [IDLE MODE INIT] Dialog open check: {dialogOpen: false, isActive: false, idleModeState: {â€¦}}
logger.ts:7 [SAVE CLOUD] ğŸ” Starting cloud save with OCC... {playTime: 821696.9999999863, isNewGame: false, userId: 'a375ecb5...', diffKeys: Array(2), hasPlayTime: true,Â â€¦}
logger.ts:7 [SAVE CLOUD] ğŸ’¾ Calling database RPC with OCC validation... {hasClickAnalytics: false, clickAnalyticsKeys: Array(0), diffSize: 56, playTime: 821696.9999999863, isNewGame: false,Â â€¦}
logger.ts:7 [SAVE CLOUD] âœ… Cloud save completed successfully - OCC check passed in database
logger.ts:7 [SAVE] âœ… Updated lastCloudState after successful cloud save
logger.ts:7 [SAVE CLOUD] ğŸ” Starting cloud save with OCC... {playTime: 821441.0999999982, isNewGame: false, userId: 'a375ecb5...', diffKeys: Array(13), hasPlayTime: true,Â â€¦}
logger.ts:7 [SAVE CLOUD] ğŸ’¾ Calling database RPC with OCC validation... {hasClickAnalytics: false, clickAnalyticsKeys: Array(0), diffSize: 434, playTime: 821441.0999999982, isNewGame: false,Â â€¦}
@supabase_supabase-js.js?v=ecbd7766:5633  POST https://epmegaduehlztjqoeqih.supabase.co/rest/v1/rpc/save_game_with_analytics 400 (Bad Request)
(anonymous) @ @supabase_supabase-js.js?v=ecbd7766:5633
(anonymous) @ @supabase_supabase-js.js?v=ecbd7766:5654
await in (anonymous)
then @ @supabase_supabase-js.js?v=ecbd7766:94Understand this error
logger.ts:12 [SAVE CLOUD] âš ï¸ OCC REJECTED by database: OCC violation: new playTime (821441.0999999982) must be greater than existing playTime (821696.9999999863)
warn @ logger.ts:12
saveGameToSupabase @ auth.ts:327
await in saveGameToSupabase
saveGame @ save.ts:250
await in saveGame
(anonymous) @ game.tsx:36
setTimeout
initializeGame @ game.tsx:34
await in initializeGame
(anonymous) @ game.tsx:56
commitHookEffectListMount @ chunk-276SZO74.js?v=ecbd7766:16915
commitPassiveMountOnFiber @ chunk-276SZO74.js?v=ecbd7766:18156
commitPassiveMountEffects_complete @ chunk-276SZO74.js?v=ecbd7766:18129
commitPassiveMountEffects_begin @ chunk-276SZO74.js?v=ecbd7766:18119
commitPassiveMountEffects @ chunk-276SZO74.js?v=ecbd7766:18109
flushPassiveEffectsImpl @ chunk-276SZO74.js?v=ecbd7766:19490
flushPassiveEffects @ chunk-276SZO74.js?v=ecbd7766:19447
commitRootImpl @ chunk-276SZO74.js?v=ecbd7766:19416
commitRoot @ chunk-276SZO74.js?v=ecbd7766:19277
performSyncWorkOnRoot @ chunk-276SZO74.js?v=ecbd7766:18895
flushSyncCallbacks @ chunk-276SZO74.js?v=ecbd7766:9119
flushSync @ chunk-276SZO74.js?v=ecbd7766:18959
scheduleRefresh @ chunk-276SZO74.js?v=ecbd7766:20004
(anonymous) @ @react-refresh:267
performReactRefresh @ @react-refresh:256
(anonymous) @ @react-refresh:677
setTimeout
(anonymous) @ @react-refresh:666
validateRefreshBoundaryAndEnqueueUpdate @ @react-refresh:728
(anonymous) @ AttackWavesChart.tsx:6
(anonymous) @ client:34
(anonymous) @ client:218
(anonymous) @ client:193
queueUpdate @ client:193
await in queueUpdate
(anonymous) @ client:642
handleMessage @ client:640
(anonymous) @ client:550Understand this warning
logger.ts:17 [SAVE] Cloud save failed: Error: OCC violation: OCC violation: new playTime (821441.0999999982) must be greater than existing playTime (821696.9999999863)
    at saveGameToSupabase (auth.ts:328:13)
    at async saveGame (save.ts:250:9)
    at async game.tsx:36:15
error @ logger.ts:17
saveGame @ save.ts:269
await in saveGame
(anonymous) @ game.tsx:36
setTimeout
initializeGame @ game.tsx:34
await in initializeGame
(anonymous) @ game.tsx:56
commitHookEffectListMount @ chunk-276SZO74.js?v=ecbd7766:16915
commitPassiveMountOnFiber @ chunk-276SZO74.js?v=ecbd7766:18156
commitPassiveMountEffects_complete @ chunk-276SZO74.js?v=ecbd7766:18129
commitPassiveMountEffects_begin @ chunk-276SZO74.js?v=ecbd7766:18119
commitPassiveMountEffects @ chunk-276SZO74.js?v=ecbd7766:18109
flushPassiveEffectsImpl @ chunk-276SZO74.js?v=ecbd7766:19490
flushPassiveEffects @ chunk-276SZO74.js?v=ecbd7766:19447
commitRootImpl @ chunk-276SZO74.js?v=ecbd7766:19416
commitRoot @ chunk-276SZO74.js?v=ecbd7766:19277
performSyncWorkOnRoot @ chunk-276SZO74.js?v=ecbd7766:18895
flushSyncCallbacks @ chunk-276SZO74.js?v=ecbd7766:9119
flushSync @ chunk-276SZO74.js?v=ecbd7766:18959
scheduleRefresh @ chunk-276SZO74.js?v=ecbd7766:20004
(anonymous) @ @react-refresh:267
performReactRefresh @ @react-refresh:256
(anonymous) @ @react-refresh:677
setTimeout
(anonymous) @ @react-refresh:666
validateRefreshBoundaryAndEnqueueUpdate @ @react-refresh:728
(anonymous) @ AttackWavesChart.tsx:6
(anonymous) @ client:34
(anonymous) @ client:218
(anonymous) @ client:193
queueUpdate @ client:193
await in queueUpdate
(anonymous) @ client:642
handleMessage @ client:640
(anonymous) @ client:550Understand this error
logger.ts:7 [GAME] Successfully saved claimed referrals to cloud
logger.ts:7 [LOOP] ğŸ”„ Loop running: 