export function handleTradeGoldForWood(state: GameState, result: ActionResult): ActionResult {
  const effectUpdates = applyActionEffects('tradeGoldForWood', state);
  Object.assign(result.stateUpdates, effectUpdates);

  const knowledge = getTotalKnowledge(state);
  const cooldownReduction = Math.min(0.5 * knowledge, 15);
  const actualCooldown = Math.max(15, 30 - cooldownReduction);
  
  result.stateUpdates.cooldowns = {
    ...result.stateUpdates.cooldowns,
    tradeGoldForWood: actualCooldown,
  };

  return result;
}

export function handleTradeGoldForStone(state: GameState, result: ActionResult): ActionResult {
  const effectUpdates = applyActionEffects('tradeGoldForStone', state);
  Object.assign(result.stateUpdates, effectUpdates);

  const knowledge = getTotalKnowledge(state);
  const cooldownReduction = Math.min(0.5 * knowledge, 15);
  const actualCooldown = Math.max(15, 30 - cooldownReduction);
  
  result.stateUpdates.cooldowns = {
    ...result.stateUpdates.cooldowns,
    tradeGoldForStone: actualCooldown,
  };

  return result;
}

export function handleTradeGoldForSteel(state: GameState, result: ActionResult): ActionResult {
  const effectUpdates = applyActionEffects('tradeGoldForSteel', state);
  Object.assign(result.stateUpdates, effectUpdates);

  const knowledge = getTotalKnowledge(state);
  const cooldownReduction = Math.min(0.5 * knowledge, 15);
  const actualCooldown = Math.max(15, 30 - cooldownReduction);
  
  result.stateUpdates.cooldowns = {
    ...result.stateUpdates.cooldowns,
    tradeGoldForSteel: actualCooldown,
  };

  return result;
}

export function handleTradeGoldForObsidian(state: GameState, result: ActionResult): ActionResult {
  const effectUpdates = applyActionEffects('tradeGoldForObsidian', state);
  Object.assign(result.stateUpdates, effectUpdates);

  const knowledge = getTotalKnowledge(state);
  const cooldownReduction = Math.min(0.5 * knowledge, 15);
  const actualCooldown = Math.max(15, 30 - cooldownReduction);
  
  result.stateUpdates.cooldowns = {
    ...result.stateUpdates.cooldowns,
    tradeGoldForObsidian: actualCooldown,
  };

  return result;
}

export function handleTradeGoldForAdamant(state: GameState, result: ActionResult): ActionResult {
  const effectUpdates = applyActionEffects('tradeGoldForAdamant', state);
  Object.assign(result.stateUpdates, effectUpdates);

  const knowledge = getTotalKnowledge(state);
  const cooldownReduction = Math.min(0.5 * knowledge, 15);
  const actualCooldown = Math.max(15, 30 - cooldownReduction);
  
  result.stateUpdates.cooldowns = {
    ...result.stateUpdates.cooldowns,
    tradeGoldForAdamant: actualCooldown,
  };

  return result;
}

export function handleTradeGoldForTorch(state: GameState, result: ActionResult): ActionResult {
  const effectUpdates = applyActionEffects('tradeGoldForTorch', state);
  Object.assign(result.stateUpdates, effectUpdates);

  const knowledge = getTotalKnowledge(state);
  const cooldownReduction = Math.min(0.5 * knowledge, 15);
  const actualCooldown = Math.max(15, 30 - cooldownReduction);
  
  result.stateUpdates.cooldowns = {
    ...result.stateUpdates.cooldowns,
    tradeGoldForTorch: actualCooldown,
  };

  return result;
}

export function handleTradeSilverForGold(state: GameState, result: ActionResult): ActionResult {
  const effectUpdates = applyActionEffects('tradeSilverForGold', state);
  Object.assign(result.stateUpdates, effectUpdates);

  const knowledge = getTotalKnowledge(state);
  const cooldownReduction = Math.min(0.5 * knowledge, 15);
  const actualCooldown = Math.max(15, 30 - cooldownReduction);
  
  result.stateUpdates.cooldowns = {
    ...result.stateUpdates.cooldowns,
    tradeSilverForGold: actualCooldown,
  };

  return result;
}
