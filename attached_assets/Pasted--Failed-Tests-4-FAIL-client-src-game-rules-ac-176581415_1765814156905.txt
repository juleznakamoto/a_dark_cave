⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 4 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Crafting Cost Reductions > should apply blacksmith_hammer 10% crafting discount for craftIronAxe
AssertionError: expected 3 to be 5 // Object.is equality

- Expected
+ Received

- 5
+ 3

 ❯ client/src/game/rules/actionEffects.test.ts:109:41
    107|     const expectedCost = Math.floor(baseCost * 0.90);
    108|     const expectedRemaining = baseCost - expectedCost;
    109|     expect(updatesWith.resources!.iron).toBe(expectedRemaining);
       |                                         ^
    110|   });
    111| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/4]⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Building Cost Reductions > should apply mastermason_chisel 10% building discount for buildCabin
AssertionError: expected 8 to be 15 // Object.is equality

- Expected
+ Received

- 15
+ 8

 ❯ client/src/game/rules/actionEffects.test.ts:196:41
    194|     const expectedWoodCost = Math.floor(baseWoodCost * 0.9);
    195|     const expectedStoneCost = Math.floor(baseStoneCost * 0.9);
    196|     expect(updatesWith.resources!.wood).toBe(baseWoodCost - expectedWoodCost);
       |                                         ^
    197|     expect(updatesWith.resources!.stone).toBe(baseStoneCost - expectedStoneCost);
    198|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/4]⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Building Cost Reductions > should apply discounts to multi-tier building costs for buildCabin
TypeError: Cannot read properties of undefined (reading 'resources.wood')
 ❯ client/src/game/rules/actionEffects.test.ts:264:64
    262| 
    263|   it('should apply discounts to multi-tier building costs for buildCabin', () => {
    264|     const baseWoodCost = (gameActions.buildCabin.cost as any)[2]["resources.wood"];
       |                                                                ^
    265| 
    266|     const state: GameState = {

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/4]⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Cost Reduction Edge Cases > should not apply discounts to non-crafting, non-building actions
TypeError: Cannot read properties of undefined (reading 'wood')
 ❯ client/src/game/rules/actionEffects.test.ts:351:78
    349|   it('should not apply discounts to non-crafting, non-building actions', () => {
    350|     // Test that chopWood doesn't get discounts
    351|     const chopWoodResource = (gameActions.chopWood.effects as any).resources.wood;
       |                                                                              ^
    352|     state.resources.wood = 0;
    353|     state.tools.blacksmith_hammer = true;

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/4]⎯


 Test Files  2 failed (2)
      Tests  5 failed | 77 passed (82)
   Start at  15:55:47
   Duration  252ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
