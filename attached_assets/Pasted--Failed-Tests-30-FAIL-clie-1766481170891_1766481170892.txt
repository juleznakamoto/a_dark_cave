⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 30 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  client/src/game/rules/actionEffects.actionBonusChance.test.ts > Tarnished Compass - actionBonusChance > Eligible Actions > exploreCave: should trigger 2x bonus when random check succeeds
 FAIL  client/src/game/rules/actionEffects.actionBonusChance.test.ts > Tarnished Compass - actionBonusChance > Eligible Actions > ventureDeeper: should trigger 2x bonus when random check succeeds
 FAIL  client/src/game/rules/actionEffects.actionBonusChance.test.ts > Tarnished Compass - actionBonusChance > Eligible Actions > mineStone: should trigger 2x bonus when random check succeeds
 FAIL  client/src/game/rules/actionEffects.actionBonusChance.test.ts > Tarnished Compass - actionBonusChance > Eligible Actions > mineIron: should trigger 2x bonus when random check succeeds
 FAIL  client/src/game/rules/actionEffects.actionBonusChance.test.ts > Tarnished Compass - actionBonusChance > Eligible Actions > chopWood: should trigger 2x bonus when random check succeeds
 FAIL  client/src/game/rules/actionEffects.actionBonusChance.test.ts > Tarnished Compass - actionBonusChance > Eligible Actions > hunt: should trigger 2x bonus when random check succeeds
AssertionError: expected undefined to be defined
 ❯ client/src/game/rules/actionEffects.actionBonusChance.test.ts:54:37
     52| 
     53|         // Verify bonus message is added
     54|         expect(updates.logMessages).toBeDefined();
       |                                     ^
     55|         expect(updates.logMessages).toContain(
     56|           'The Tarnished Compass glows! Your gains are doubled!'

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/30]⎯

 FAIL  client/src/game/rules/actionEffects.actionBonusChance.test.ts > Tarnished Compass - actionBonusChance > Probability Distribution > should trigger approximately 10% of the time over many iterations
AssertionError: expected 0 to be greater than 5
 ❯ client/src/game/rules/actionEffects.actionBonusChance.test.ts:286:26
    284|       // Allow 5% - 15% range for statistical variance
    285|       const percentage = (triggeredCount / iterations) * 100;
    286|       expect(percentage).toBeGreaterThan(5);
       |                          ^
    287|       expect(percentage).toBeLessThan(15);
    288|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Cave Exploration Actions > chopWood gains match tooltip
AssertionError: expected undefined to be defined
 ❯ client/src/game/rules/resourceGains.test.ts:334:34
    332|       const { expectedGains, actualGains } = testActionGains('chopWood', state);
    333| 
    334|       expect(expectedGains.wood).toBeDefined();
       |                                  ^
    335|       expect(actualGains.wood).toBeDefined();
    336| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineStone gains match tooltip
AssertionError: expected undefined to be defined
 ❯ client/src/game/rules/resourceGains.test.ts:388:35
    386|       const { expectedGains, actualGains } = testActionGains('mineStone', state…
    387| 
    388|       expect(expectedGains.stone).toBeDefined();
       |                                   ^
    389|       expect(actualGains.stone).toBeDefined();
    390| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineIron gains match tooltip
AssertionError: expected undefined to be defined
 ❯ client/src/game/rules/resourceGains.test.ts:404:34
    402|       const { expectedGains, actualGains } = testActionGains('mineIron', state);
    403| 
    404|       expect(expectedGains.iron).toBeDefined();
       |                                  ^
    405|       expect(actualGains.iron).toBeDefined();
    406| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineCoal gains match tooltip
AssertionError: expected undefined to be defined
 ❯ client/src/game/rules/resourceGains.test.ts:420:34
    418|       const { expectedGains, actualGains } = testActionGains('mineCoal', state);
    419| 
    420|       expect(expectedGains.coal).toBeDefined();
       |                                  ^
    421|       expect(actualGains.coal).toBeDefined();
    422| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineObsidian gains match tooltip
AssertionError: expected undefined to be defined
 ❯ client/src/game/rules/resourceGains.test.ts:436:38
    434|       const { expectedGains, actualGains } = testActionGains('mineObsidian', st…
    435| 
    436|       expect(expectedGains.obsidian).toBeDefined();
       |                                      ^
    437|       expect(actualGains.obsidian).toBeDefined();
    438| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > chopWood with loggers_gloves applies correct bonus
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:478:32
    476| 
    477|       // With gloves should have higher gains (30% multiplier)
    478|       expect(expectedWith.wood.min).toBeGreaterThanOrEqual(Math.floor(expectedW…
       |                                ^
    479|       expect(expectedWith.wood.max).toBeGreaterThanOrEqual(Math.floor(expectedW…
    480|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > hunt with hunter_cloak applies correct bonus
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:496:32
    494|       // With cloak should have higher gains (50% multiplier)
    495|       // Use a more lenient check since the multiplier is applied to the random…
    496|       expect(expectedWith.food.min).toBeGreaterThan(expectedWithout.food.min);
       |                                ^
    497|       expect(expectedWith.food.max).toBeGreaterThan(expectedWithout.food.max);
    498|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > mineStone with different pickaxes shows progression
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:512:30
    510| 
    511|       // Iron pickaxe should give more stone (50% vs 25% bonus)
    512|       expect(ironGains.stone.min).toBeGreaterThan(stoneGains.stone.min);
       |                              ^
    513|       expect(ironGains.stone.max).toBeGreaterThan(stoneGains.stone.max);
    514|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Button Upgrades > chopWood with button upgrades increases gains
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:1087:32
    1085| 
    1086|       // With upgrades should have higher gains (100% more at level 5)
    1087|       expect(expectedWith.wood.min).toBeGreaterThan(expectedWithout.wood.min);
       |                                ^
    1088|       expect(expectedWith.wood.max).toBeGreaterThan(expectedWithout.wood.max);
    1089|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Axe Progression > chopWood with stone axe shows baseline gains
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:1121:33
    1119| 
    1120|       // Stone axe gives 50% multiplier: base 6-12 becomes 9-18
    1121|       expect(expectedGains.wood.min).toBe(9);
       |                                 ^
    1122|       expect(expectedGains.wood.max).toBe(18);
    1123|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Axe Progression > chopWood with iron axe shows improved gains
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:1132:33
    1130| 
    1131|       // Iron axe gives 100% multiplier: base 6-12 becomes 12-24
    1132|       expect(expectedGains.wood.min).toBe(12);
       |                                 ^
    1133|       expect(expectedGains.wood.max).toBe(24);
    1134|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Axe Progression > chopWood with steel axe shows further improved gains
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:1143:33
    1141| 
    1142|       // Steel axe gives 150% multiplier: base 6-12 becomes 15-30
    1143|       expect(expectedGains.wood.min).toBe(15);
       |                                 ^
    1144|       expect(expectedGains.wood.max).toBe(30);
    1145|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Focus Mode > chopWood gains are doubled during active focus mode
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:1166:32
    1164|       // Without focus: base 6-12 with stone axe (50%) = 9-18
    1165|       // With focus: 9-18 * 2 = 18-36
    1166|       expect(gainsWithout.wood.min).toBe(9);
       |                                ^
    1167|       expect(gainsWithout.wood.max).toBe(18);
    1168|       expect(gainsWith.wood.min).toBe(18);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Focus Mode > mineCoal gains are doubled during active focus mode
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:1235:29
    1233|       const { expectedGains: gainsWith } = testActionGains('mineCoal', stateWit…
    1234| 
    1235|       expect(gainsWith.coal.min).toBe(gainsWithout.coal.min * 2);
       |                             ^
    1236|       expect(gainsWith.coal.max).toBe(gainsWithout.coal.max * 2);
    1237|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Focus Mode > focus mode does not apply when expired
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:1251:33
    1249| 
    1250|       // Should be same as without focus: base 6-12 with stone axe (50%) = 9-18
    1251|       expect(expectedGains.wood.min).toBe(9);
       |                                 ^
    1252|       expect(expectedGains.wood.max).toBe(18);
    1253|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Focus Mode > focus mode tooltip shows doubled gains for chopWood
AssertionError: expected undefined to be defined
 ❯ client/src/game/rules/resourceGains.test.ts:1268:24
    1266|       const woodGain = tooltipGains.find(g => g.resource === 'wood');
    1267| 
    1268|       expect(woodGain).toBeDefined();
       |                        ^
    1269|       // Base 6-12, doubled = 12-24
    1270|       expect(woodGain!.min).toBe(12);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Focus Mode > focus mode stacks with other bonuses (axe + focus)
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:1319:33
    1317|       // Base 6-12 with iron axe (100%) = 12-24
    1318|       // With focus: 12-24 * 2 = 24-48
    1319|       expect(expectedGains.wood.min).toBe(24);
       |                                 ^
    1320|       expect(expectedGains.wood.max).toBe(48);
    1321|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Focus Mode > focus mode actual gains fall within doubled tooltip range
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:1340:24
    1338| 
    1339|       // Verify tooltip matches expected calculation
    1340|       expect(woodGain!.min).toBe(expectedGains.wood.min);
       |                        ^
    1341|       expect(woodGain!.max).toBe(expectedGains.wood.max);
    1342| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Multiplier Stacking > multiple bonuses stack correctly for chopWood
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:1368:67
    1366|       const maxActual = Math.max(...actualGains.wood);
    1367| 
    1368|       expect(minActual).toBeGreaterThanOrEqual(expectedGains.wood.min);
       |                                                                   ^
    1369|       expect(maxActual).toBeLessThanOrEqual(expectedGains.wood.max);
    1370|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Multiplier Stacking > multiple bonuses stack correctly for mining
TypeError: Cannot read properties of undefined (reading 'min')
 ❯ client/src/game/rules/resourceGains.test.ts:1388:68
    1386|       const maxActual = Math.max(...actualGains.stone);
    1387| 
    1388|       expect(minActual).toBeGreaterThanOrEqual(expectedGains.stone.min);
       |                                                                    ^
    1389|       expect(maxActual).toBeLessThanOrEqual(expectedGains.stone.max);
    1390|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Additional Cave Exploration > exploreCitadel with cave exploration bonuses
TypeError: Cannot read properties of undefined (reading 'max')
 ❯ client/src/game/rules/resourceGains.test.ts:1457:33
    1455|       // Iron lantern provides 25% cave explore multiplier
    1456|       // Note: min may stay the same due to floor(1 * 1.25) = 1, but max should…
    1457|       expect(gainsWith.obsidian.max).toBeGreaterThan(gainsWithout.obsidian.max);
       |                                 ^
    1458|       expect(gainsWith.adamant.max).toBeGreaterThan(gainsWithout.adamant.max);
    1459|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Advanced Mining Actions > mineSulfur gains match tooltip
AssertionError: expected undefined to be defined
 ❯ client/src/game/rules/resourceGains.test.ts:1508:36
    1506|       const { expectedGains, actualGains } = testActionGains('mineSulfur', stat…
    1507| 
    1508|       expect(expectedGains.sulfur).toBeDefined();
       |                                    ^
    1509|       expect(actualGains.sulfur).toBeDefined();
    1510| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/30]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Advanced Mining Actions > mineAdamant gains match tooltip
AssertionError: expected undefined to be defined
 ❯ client/src/game/rules/resourceGains.test.ts:1524:37
    1522|       const { expectedGains, actualGains } = testActionGains('mineAdamant', sta…
    1523| 
    1524|       expect(expectedGains.adamant).toBeDefined();
       |                                     ^
    1525|       expect(actualGains.adamant).toBeDefined();
    1526| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/30]⎯


 Test Files  2 failed (2)
      Tests  30 failed | 65 passed (95)
   Start at  09:11:44
   Duration  1.10s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
