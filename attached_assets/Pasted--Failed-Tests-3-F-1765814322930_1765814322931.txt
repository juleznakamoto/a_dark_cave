
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 3 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Crafting Cost Reductions > should apply blacksmith_hammer 10% crafting discount for craftIronAxe
AssertionError: expected 3 to be 5 // Object.is equality

- Expected
+ Received

- 5
+ 3

 ❯ client/src/game/rules/actionEffects.test.ts:110:41
    108|     const expectedCost = Math.floor(baseCost * 0.90);
    109|     const expectedFinalAmount = baseCost - expectedCost;
    110|     expect(updatesWith.resources!.iron).toBe(expectedFinalAmount);
       |                                         ^
    111|   });
    112| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Building Cost Reductions > should apply mastermason_chisel 10% building discount for buildCabin
AssertionError: expected 8 to be 15 // Object.is equality

- Expected
+ Received

- 15
+ 8

 ❯ client/src/game/rules/actionEffects.test.ts:200:41
    198|     const expectedFinalWood = baseWoodCost - expectedWoodCost;
    199|     const expectedFinalStone = baseStoneCost - expectedStoneCost;
    200|     expect(updatesWith.resources!.wood).toBe(expectedFinalWood);
       |                                         ^
    201|     expect(updatesWith.resources!.stone).toBe(expectedFinalStone);
    202|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/3]⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > Building Cost Reductions > should apply discounts to building with existing cabins
TypeError: Cannot read properties of undefined (reading 'resources.wood')
 ❯ client/src/game/rules/actionEffects.test.ts:269:64
    267|   it('should apply discounts to building with existing cabins', () => {
    268|     // buildCabin level 2 costs 300 wood, 100 stone (as defined in villageBuildAct…
    269|     const baseWoodCost = (gameActions.buildCabin.cost as any)[2]["resources.wood"];
       |                                                                ^
    270|     const baseStoneCost = (gameActions.buildCabin.cost as any)[2]["resources.stone…
    271| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/3]⎯


 Test Files  2 failed (2)
      Tests  4 failed | 78 passed (82)
   Start at  15:58:34
   Duration  200ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
