{knowledge: 8, discount: '0%', numBuyTrades: 2, numSellTrades: 2, filteredBuyTradesCount: 9}
logger.ts:33 v279Z [MERCHANT TRADES] Final choices generated: {totalChoices: 4, buyTrades: 2, sellTrades: 2, choices: Array(4)}
logger.ts:33 v279Z [MERCHANT TRADES] Generating merchant choices: {knowledge: 8, discount: '0%', numBuyTrades: 2, numSellTrades: 2, filteredBuyTradesCount: 9}
logger.ts:33 v279Z [MERCHANT TRADES] Final choices generated: {totalChoices: 4, buyTrades: 2, sellTrades: 2, choices: Array(4)}
logger.ts:33 v279Z [MERCHANT TRADES] Setting timed event tab with merchant trades: {eventId: 'merchant', choicesCount: 4, duration: 240000, expiryTime: 1766938948145}
logger.ts:33 v279Z [TIMED EVENT PANEL] Merchant event, using merchantTrades from state: {eventId: 'merchant', choicesCount: 4, choices: Array(4)}choices: Array(4)0: buyAmount: 280buyResource: "food"cost: "180 Stone"executed: falseid: "buy_food_250_very_early"label: "+280 Food"sellAmount: 180sellResource: "stone"[[Prototype]]: Object1: {id: 'buy_wood_250_very_early', label: '+280 Wood', cost: '40 Silver', buyResource: 'wood', buyAmount: 280,¬†‚Ä¶}2: {id: 'sell_iron_100_very_early', label: '+5 Gold', cost: '55 Iron', buyResource: 'gold', buyAmount: 5,¬†‚Ä¶}3: {id: 'sell_bones_100_very_early', label: '+70 Wood', cost: '55 Bones', buyResource: 'wood', buyAmount: 70,¬†‚Ä¶}length: 4[[Prototype]]: Array(0)choicesCount: 4eventId: "merchant"[[Prototype]]: Object
logger.ts:33 v279Z [SAVE CLOUD] üîç Playtime overwrite check: {allowPlaytimeOverwrite: false, isNewGame: false, willAllowOverwrite: false, currentPlayTime: 3638068}
logger.ts:33 v279Z [SAVE CLOUD] Edge Function success: {success: true}
logger.ts:33 v279Z [SAVE] ‚úÖ Updated lastCloudState after successful cloud save
logger.ts:33 v279Z [SAVE CLOUD] üîç Playtime overwrite check: {allowPlaytimeOverwrite: false, isNewGame: false, willAllowOverwrite: false, currentPlayTime: 3653168}
logger.ts:33 v279Z [SAVE CLOUD] Edge Function success: {success: true}
logger.ts:33 v279Z [SAVE] ‚úÖ Updated lastCloudState after successful cloud save
logger.ts:33 v279Z [TIMED EVENT PANEL] handleChoice called: {choiceId: 'buy_food_250_very_early', isMerchantEvent: true, eventChoices: Array(4), merchantTrades: {‚Ä¶}}choiceId: "buy_food_250_very_early"eventChoices: Array(4)0: {id: 'buy_food_250_very_early', label: '+280 Food'}1: {id: 'buy_wood_250_very_early', label: '+280 Wood'}2: {id: 'sell_iron_100_very_early', label: '+5 Gold'}3: {id: 'sell_bones_100_very_early', label: '+70 Wood'}length: 4[[Prototype]]: Array(0)isMerchantEvent: truemerchantTrades: {choices: Array(4), purchasedIds: Array(0)}[[Prototype]]: Object
state.ts:1380 [STATE] applyEventChoice called: {choiceId: 'buy_food_250_very_early', eventId: 'merchant', hasCurrentLogEntry: true, currentLogEntryChoices: Array(4), merchantTradesInState: {‚Ä¶},¬†‚Ä¶}choiceId: "buy_food_250_very_early"currentLogEntryChoices: Array(4)0: {id: 'buy_stone_500_early', hasEffect: false, effectType: 'undefined'}1: {id: 'buy_food_250_very_early', hasEffect: false, effectType: 'undefined'}2: {id: 'sell_stone_100_very_early', hasEffect: false, effectType: 'undefined'}3: {id: 'sell_food_100_very_early', hasEffect: false, effectType: 'undefined'}length: 4[[Prototype]]: Array(0)eventId: "merchant"hasCurrentLogEntry: truemerchantTradesInState: {choices: Array(4), purchasedIds: Array(1)}timedEventTabData: {isActive: true, event: {‚Ä¶}, expiryTime: 1766938948145}[[Prototype]]: Object
logger.ts:33 v279Z [EVENT MANAGER] applyEventChoice called: {choiceId: 'buy_food_250_very_early', eventId: 'merchant', hasCurrentLogEntry: true, stateKeys: Array(162), hasMerchantTrades: true,¬†‚Ä¶}choiceId: "buy_food_250_very_early"eventId: "merchant"hasCurrentLogEntry: truehasMerchantTrades: truemerchantTradesKeys: (2)¬†['choices', 'purchasedIds']stateKeys: (162)¬†['gameId', 'playTime', 'startTime', 'resources', 'stats', 'boostMode', 'flags', 'schematics', 'tools', 'weapons', 'clothing', 'relics', 'fellowship', 'blessings', 'books', 'buildings', 'villagers', 'story', 'hoveredTooltips', 'damagedBuildings', 'events', 'effects', 'bastion_stats', 'log', 'current_population', 'total_population', 'templeDedicated', 'templeDedicatedTo', 'triggeredEvents', 'eventCooldowns', 'feastState', 'boneDevourerState', 'greatFeastState', 'greatFeastActivations', 'miningBoostState', 'combatSkills', 'activatedPurchases', 'feastActivations', 'cruelMode', 'CM', 'BTP', 'attackWaveTimers', 'curseState', 'frostfallState', 'woodcutterState', 'fogState', 'shopNotificationSeen', 'authNotificationSeen', 'authNotificationVisible', 'mysteriousNoteShopNotificationSeen', 'mysteriousNoteDonateNotificationSeen', 'isUserSignedIn', 'detectedCurrency', 'lastResourceSnapshotTime', 'isNewGame', 'allowPlayTimeOverwrite', 'hasMadeNonFreePurchase', 'referralCode', 'referrals', 'referralCount', 'referredUsers', 'social_media_rewards', 'idleModeState', 'sleepUpgrades', 'focus', 'totalFocusEarned', 'focusState', 'huntingSkills', 'buttonUpgrades', 'clickAnalytics', 'unlockedAchievements', 'claimedAchievements', 'username', 'cooldowns', 'merchantTrades', 'timedTabDuration', 'loopProgress', 'isGameLoopActive', 'isPaused', 'isMuted', 'shopNotificationVisible', 'highlightedResources', 'lastFreeGoldClaim', 'compassGlowButton', 'isPausedPreviously', 'versionCheckDialogOpen', 'activeTab', 'devMode', 'lastSaved', 'eventDialog', 'combatDialog', 'timedEventTab', 'authDialogOpen', 'shopDialogOpen', 'leaderboardDialogOpen', 'fullGamePurchaseDialogOpen', 'idleModeDialog', 'inactivityDialogOpen', 'inactivityReason', 'restartGameDialogOpen',¬†‚Ä¶][[Prototype]]: Object
logger.ts:33 v279Z [EVENT MANAGER] Processing merchant event: {choiceId: 'buy_food_250_very_early', hasMerchantTrades: true, merchantTradesCount: 4, allTradeIds: Array(4), purchasedIds: Array(1)}allTradeIds: (4)¬†['buy_food_250_very_early', 'buy_wood_250_very_early', 'sell_iron_100_very_early', 'sell_bones_100_very_early']choiceId: "buy_food_250_very_early"hasMerchantTrades: truemerchantTradesCount: 4purchasedIds: ['buy_food_250_very_early'][[Prototype]]: Object
logger.ts:33 v279Z [EVENT MANAGER] Trade already purchased: {choiceId: 'buy_food_250_very_early'}
logger.ts:33 v279Z [STATE] EventManager.applyEventChoice returned: {choiceId: 'buy_food_250_very_early', eventId: 'merchant', changes: {‚Ä¶}, hasResources: false, resourceKeys: Array(0)}changes: {}choiceId: "buy_food_250_very_early"eventId: "merchant"hasResources: falseresourceKeys: [][[Prototype]]: Object
logger.ts:33 v279Z [STATE] State changes after extraction: {choiceId: 'buy_food_250_very_early', eventId: 'merchant', updatedChanges: {‚Ä¶}, hasResources: false, resourceKeys: Array(0),¬†‚Ä¶}changeCount: 0choiceId: "buy_food_250_very_early"eventId: "merchant"hasResources: falseresourceKeys: []updatedChanges: {}[[Prototype]]: Object
logger.ts:33 v279Z [STATE] No changes to apply - updatedChanges is empty
logger.ts:33 v279Z [SAVE CLOUD] üìä Resource snapshot includes stats: {hasStats: true, statsKeys: Array(4), snapshotKeys: Array(29)}
logger.ts:33 v279Z [SAVE CLOUD] üîç Playtime overwrite check: {allowPlaytimeOverwrite: false, isNewGame: false, willAllowOverwrite: false, currentPlayTime: 3668260}
logger.ts:33 v279Z [SAVE CLOUD] Edge Function success: {success: true}
logger.ts:33 v279Z [SAVE] ‚úÖ Updated lastCloudState after successful cloud save
logger.ts:33 v279Z [SAVE CLOUD] üîç Playtime overwrite check: {allowPlaytimeOverwrite: false, isNewGame: false, willAllowOverwrite: false, currentPlayTime: 3683368}allowPlaytimeOverwrite: falsecurrentPlayTime: 3683368isNewGame: falsewillAllowOverwrite: false[[Prototype]]: Object
logger.ts:33 v279Z [SAVE CLOUD] Edge Function success: {success: true}
logger.ts:33 v279Z [SAVE] ‚úÖ Updated lastCloudState after successful cloud save