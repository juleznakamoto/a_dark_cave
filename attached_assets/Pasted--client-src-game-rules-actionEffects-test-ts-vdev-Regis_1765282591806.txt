 | client/src/game/rules/actionEffects.test.ts
vdev Registering sounds for lazy loading...
vdev Sound URLs registered for lazy loading

 ❯ client/src/game/rules/actionEffects.test.ts (6 tests | 6 failed) 13ms
     × should successfully import and use applyActionEffects 6ms
     × should apply effects for craftBoneTotem action 1ms
     × should apply effects for craftTorch action 1ms
     × should apply effects for craftIronSword action 0ms
     × should handle action that does not exist 2ms
     × should throw error if gameActions not registered 0ms
stdout | client/src/game/loop.test.ts
vdev Registering sounds for lazy loading...
vdev Sound URLs registered for lazy loading

stdout | client/src/game/loop.test.ts > Game Loop Production > should handle starvation when food runs out
vdev [STATE] Set Flag: starvationActive = true

 ✓ client/src/game/loop.test.ts (3 tests) 5ms

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 53 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  client/src/game/rules/actionEffects.test.ts > actionEffects - circular dependency fix > should successfully import and use applyActionEffects
 FAIL  client/src/game/rules/actionEffects.test.ts > actionEffects - circular dependency fix > should apply effects for craftBoneTotem action
 FAIL  client/src/game/rules/actionEffects.test.ts > actionEffects - circular dependency fix > should apply effects for craftTorch action
 FAIL  client/src/game/rules/actionEffects.test.ts > actionEffects - circular dependency fix > should apply effects for craftIronSword action
 FAIL  client/src/game/rules/actionEffects.test.ts > actionEffects - circular dependency fix > should handle action that does not exist
 FAIL  client/src/game/rules/actionEffects.test.ts > actionEffects - circular dependency fix > should throw error if gameActions not registered
TypeError: (0 , __vite_ssr_import_3__.createInitialState) is not a function
 ❯ client/src/game/rules/actionEffects.test.ts:12:13
     10| 
     11|   beforeEach(() => {
     12|     state = createInitialState();
       |             ^
     13|     // Ensure gameActions is registered
     14|     setGameActionsRef(gameActions);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Cave Exploration Actions > chopWood gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:303:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Cave Exploration Actions > exploreCave gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:319:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Cave Exploration Actions > ventureDeeper gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:337:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineStone gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:357:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineIron gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:373:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineCoal gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:389:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineObsidian gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:405:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Hunting Actions > hunt gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:423:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > chopWood with loggers_gloves applies correct bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:445:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > hunt with hunter_cloak applies correct bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:462:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > mineStone with different pickaxes shows progression
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:479:45

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > exploreCave with different lanterns shows progression
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:497:44

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:572:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:588:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems with boneTemple applies 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:608:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems with sacrificial_tunic applies 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:625:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems with sacrificial_tunic applies 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:644:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems with both boneTemple and sacrificial_tunic stacks additively (50% total)
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:663:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems with both boneTemple and sacrificial_tunic stacks additively (50% total)
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:682:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems with sacrificial_tunic: tooltip matches actual gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:704:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems with sacrificial_tunic: tooltip matches actual gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:729:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems with sacrificial_tunic and boneTemple: tooltip matches actual gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:754:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems with sacrificial_tunic and boneTemple: tooltip matches actual gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:787:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems: only tunic (no temple) gives 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:817:47

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems: only temple (no tunic) gives 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:833:47

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems: only tunic (no temple) gives 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:850:47

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems: only temple (no tunic) gives 25% bonus
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:866:47

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Button Upgrades > chopWood with button upgrades increases gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:887:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Button Upgrades > exploreCave with button upgrades increases gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:908:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[30/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Axe Progression > chopWood with stone axe shows baseline gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:922:33

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[31/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Axe Progression > chopWood with iron axe shows improved gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:933:33

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[32/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Axe Progression > chopWood with steel axe shows further improved gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:944:33

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[33/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Multiplier Stacking > multiple bonuses stack correctly for chopWood
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:961:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[34/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Multiplier Stacking > multiple bonuses stack correctly for mining
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:981:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[35/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Additional Cave Exploration > exploreCitadel gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:1001:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[36/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Additional Cave Exploration > exploreCitadel: tooltip calculation matches actual gains
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:1026:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[37/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Additional Cave Exploration > exploreCitadel with cave exploration bonuses
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:1053:47

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[38/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Craft Actions > craftBoneTotem produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ client/src/game/rules/resourceGains.test.ts:1068:29
    1066|         buildings: { altar: 1 },
    1067|       });
    1068|       const effectUpdates = applyActionEffects('craftBoneTotem', state);
       |                             ^
    1069| 
    1070|       expect(effectUpdates.resources?.bone_totem).toBe((state.resources.bone_totem || …

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Craft Actions > craftBoneTotems5 produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ client/src/game/rules/resourceGains.test.ts:1077:29
    1075|         buildings: { sanctum: 1 },
    1076|       });
    1077|       const effectUpdates = applyActionEffects('craftBoneTotems5', state);
       |                             ^
    1078| 
    1079|       expect(effectUpdates.resources?.bone_totem).toBe((state.resources.bone_totem || …

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[40/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Craft Actions > craftLeatherTotem produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ client/src/game/rules/resourceGains.test.ts:1086:29
    1084|         buildings: { temple: 1 },
    1085|       });
    1086|       const effectUpdates = applyActionEffects('craftLeatherTotem', state);
       |                             ^
    1087| 
    1088|       expect(effectUpdates.resources?.leather_totem).toBe((state.resources.leather_tot…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[41/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Craft Actions > craftLeatherTotems5 produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ client/src/game/rules/resourceGains.test.ts:1095:29
    1093|         buildings: { sanctum: 1 },
    1094|       });
    1095|       const effectUpdates = applyActionEffects('craftLeatherTotems5', state);
       |                             ^
    1096| 
    1097|       expect(effectUpdates.resources?.leather_totem).toBe((state.resources.leather_tot…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[42/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Advanced Mining Actions > mineSulfur gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:1107:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[43/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Advanced Mining Actions > mineAdamant gains match tooltip
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
    271|   // Run action multiple times to sample the random range
    272|   for (let i = 0; i < iterations; i++) {
    273|     const effectUpdates = applyActionEffects(actionId, state);
       |                           ^
    274| 
    275|     if (effectUpdates.resources) {
 ❯ client/src/game/rules/resourceGains.test.ts:1123:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[44/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Trade Actions > tradeGoldForFood (tier 3) produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ client/src/game/rules/resourceGains.test.ts:1141:29
    1139|         buildings: { merchantsGuild: 1 },
    1140|       });
    1141|       const effectUpdates = applyActionEffects('tradeGoldForFood', state);
       |                             ^
    1142| 
    1143|       // Tier 3 gives 1000 food

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[45/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Trade Actions > tradeGoldForStone (tier 3) produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ client/src/game/rules/resourceGains.test.ts:1153:29
    1151|         buildings: { merchantsGuild: 1 },
    1152|       });
    1153|       const effectUpdates = applyActionEffects('tradeGoldForStone', state);
       |                             ^
    1154| 
    1155|       // Tier 3 gives 1000 stone

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[46/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Trade Actions > tradeGoldForTorch (tier 3) produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ client/src/game/rules/resourceGains.test.ts:1165:29
    1163|         buildings: { merchantsGuild: 1 },
    1164|       });
    1165|       const effectUpdates = applyActionEffects('tradeGoldForTorch', state);
       |                             ^
    1166| 
    1167|       // Tier 3 gives 250 torches

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[47/53]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Trade Actions > tradeSilverForGold (tier 3) produces correct amount
TypeError: (0 , __vite_ssr_import_1__.applyActionEffects) is not a function
 ❯ client/src/game/rules/resourceGains.test.ts:1177:29
    1175|         buildings: { merchantsGuild: 1 },
    1176|       });
    1177|       const effectUpdates = applyActionEffects('tradeSilverForGold', state);
       |                             ^
    1178| 
    1179|       // Tier 3 gives 50 gold

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[48/53]⎯


 Test Files  2 failed | 12 passed (14)
      Tests  53 failed | 155 passed (208)
   Start at  12:16:08
   Duration  6.42s (transform 3.10s, setup 0ms, import 5.45s, tests 1.99s, environment 3ms)

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
