t/src/game/rules/events.test.ts (3 tests) 10ms

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 29 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Cave Exploration Actions > chopWood gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:303:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Cave Exploration Actions > exploreCave gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:319:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Cave Exploration Actions > ventureDeeper gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:337:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineStone gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:357:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineIron gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:373:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineCoal gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:389:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions > mineObsidian gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:405:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Hunting Actions > hunt gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:423:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > chopWood with loggers_gloves applies correct bonus
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:445:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > hunt with hunter_cloak applies correct bonus
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:462:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > mineStone with different pickaxes shows progression
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:478:45

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Actions with Item Bonuses > exploreCave with different lanterns shows progression
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:496:44

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Crafting Cost Reductions > blacksmith_hammer reduces crafting costs by 15%
AssertionError: expected 45 to be 43 // Object.is equality

- Expected
+ Received

- 43
+ 45

 ❯ client/src/game/rules/resourceGains.test.ts:560:26
    558| 
    559|       // With hammer should cost 15% less
    560|       expect(amountWith).toBe(Math.ceil(amountWithout * 0.85));
       |                          ^
    561|     });
    562|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:569:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > leatherTotems gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:585:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Sacrifice Actions > boneTotems with boneTemple applies 25% bonus
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:605:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Button Upgrades > chopWood with button upgrades increases gains
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:622:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Button Upgrades > exploreCave with button upgrades increases gains
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:640:50

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Multiplier Stacking > multiple bonuses stack correctly for chopWood
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:657:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Multiplier Stacking > multiple bonuses stack correctly for mining
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:677:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions - Extended > mineSulfur gains match tooltip
ReferenceError: initialState is not defined
 ❯ client/src/game/rules/resourceGains.test.ts:692:21
    690|   describe('Mining Actions - Extended', () => {
    691|     it('mineSulfur gains match tooltip', () => {
    692|       const state = { ...initialState };
       |                     ^
    693|       const expectedGains = calculateResourceGains('mineSulfur', state…
    694| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Mining Actions - Extended > mineAdamant gains match tooltip
ReferenceError: initialState is not defined
 ❯ client/src/game/rules/resourceGains.test.ts:715:21
    713| 
    714|     it('mineAdamant gains match tooltip', () => {
    715|       const state = { ...initialState };
       |                     ^
    716|       const expectedGains = calculateResourceGains('mineAdamant', stat…
    717| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Forest Trade Actions > buy1000Food gains match tooltip
ReferenceError: initialState is not defined
 ❯ client/src/game/rules/resourceGains.test.ts:740:21
    738|   describe('Forest Trade Actions', () => {
    739|     it('buy1000Food gains match tooltip', () => {
    740|       const state = { ...initialState, resources: { ...initialState.re…
       |                     ^
    741|       const expectedGains = calculateResourceGains('buy1000Food', stat…
    742| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Forest Trade Actions > buy1000Stone gains match tooltip
ReferenceError: initialState is not defined
 ❯ client/src/game/rules/resourceGains.test.ts:751:21
    749| 
    750|     it('buy1000Stone gains match tooltip', () => {
    751|       const state = { ...initialState, resources: { ...initialState.re…
       |                     ^
    752|       const expectedGains = calculateResourceGains('buy1000Stone', sta…
    753| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Forest Trade Actions > buy250Torch gains match tooltip
ReferenceError: initialState is not defined
 ❯ client/src/game/rules/resourceGains.test.ts:762:21
    760| 
    761|     it('buy250Torch gains match tooltip', () => {
    762|       const state = { ...initialState, resources: { ...initialState.re…
       |                     ^
    763|       const expectedGains = calculateResourceGains('buy250Torch', stat…
    764| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Forest Trade Actions > buy50Gold gains match tooltip
ReferenceError: initialState is not defined
 ❯ client/src/game/rules/resourceGains.test.ts:773:21
    771| 
    772|     it('buy50Gold gains match tooltip', () => {
    773|       const state = { ...initialState, resources: { ...initialState.re…
       |                     ^
    774|       const expectedGains = calculateResourceGains('buy50Gold', state);
    775| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Additional Cave Exploration > exploreCitadel gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:789:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Advanced Mining Actions > mineSulfur gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:848:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/29]⎯

 FAIL  client/src/game/rules/resourceGains.test.ts > Resource Gain Tests > Advanced Mining Actions > mineAdamant gains match tooltip
ReferenceError: isSacrificeAction is not defined
 ❯ applyActionEffects client/src/game/rules/index.ts:691:11
    689| 
    690|           // For non-sacrifice actions, apply bonuses and multipliers
    691|           if (!isSacrificeAction) {
       |           ^
    692|             // Apply action bonuses from the centralized effects system
    693|             const actionBonuses = getActionBonusesCalc(actionId, state…
 ❯ testActionGains client/src/game/rules/resourceGains.test.ts:273:27
 ❯ client/src/game/rules/resourceGains.test.ts:864:46

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/29]⎯


 Test Files  1 failed | 9 passed (10)
      Tests  29 failed | 69 passed (98)
   Start at  08:29:40
   Duration  3.75s (transform 2.01s, setup 0ms, import 3.53s, tests 998ms, environment 2ms)

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
